@using WebEnterprise_1640.Models
@model IEnumerable<ArticleModel>

@{
	ViewData["Title"] = "Article";
}
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
<link rel="stylesheet" href="~/css/CMP59.css">
<link rel="stylesheet" href="~/css/navbar_footer.css" asp-append-version="true">

<header>
	@{
		var userData = ViewBag.User;
		UserModel? user = null;
		if (userData != null)
		{
			user = (UserModel)userData;
		}
	}
	<div class="nav-bar">
		<div class="nav-1">
			<p>BEE MAGAZINE
			<p>
		</div>
		<div class="home an" id="home">
			<div class="home-cover">
				<a href="/Home/Index" class="home-button" style="text-decoration:none">Home</a>
			</div>
		</div>
		@if (user != null)
		{
			<p>Welcome, @user.UserName</p>
			<div class="button an" id="login">
				<a href="@Url.ActionLink("Logout", "Account")" class="login-button">Log out</a>
			</div>
		}
		else
		{
			<div class="button an" id="login">
				<a href="/Account/Login" class="login-button">Log in</a>
			</div>
		}
		<div onclick="showmenu()" class="icon-menu">
			<i class="fa-solid fa-bars"></i>
		</div>
	</div>
	<div class="show-menu none">
	</div>
</header>
<div class="container mt-4"  style="height: 100vh;">
	<div class="">
		@foreach (var article in Model)
		{
			<div class="mx-auto mb-4 ">
				<div class="card magazine-card">
					<div class="card-body">
						<p><b>Article title:</b></p>
						@article.Name
					</div>
					<div class="card-body">
						<p><b>Article Description:</b></p>
						@article.Description
					</div>
					<div class="card-body">
						<p><b>Student Name:</b></p>
						@article.User.FullName
					</div>
					<div class="card-body">
						<p><b>Date submitted:</b></p>
						@article.SubmitDate.ToString("MMMM-dd-yyyy h:mm tt")
					</div>
				</div>
				<div class="card-body card magazine-card">
					<div class="card-body">
						<b><a>File submission:</a></b>
						@foreach (var document in article.Documents)
						{
							<a href="~/media/@document.File" class="small" download><i class="fa-regular fa-file"></i>@document.File</a>
							<br />
						}
					</div>
					<div class="card-body">
						<b><a>Image File:</a></b>
						@foreach (var document in article.Documents)
						{
							<a href="~/media/@document.Image" class="small" download><i class="fa-solid fa-file-image"></i>@document.Image</a>
							<br />
						}
					</div>
					<div class="comment-card mt-4">
						@foreach (var comment in article.Comments)
						{
							<div class="comment">
								<p><b>@comment.User.FullName:</b><br>@comment.Content</p>
							</div>
						}
					</div>

					<form asp-action="AddComment" asp-controller="Article" method="post">
						<div class="form-group">
							<input type="hidden" name="articleId" value="@article.Id" />
							<label for="comment"><b>Add Comment:</b></label>
							<div style="display: flex; align-items: flex-end ;">
								<textarea class="form-control" id="comment" name="comment" style="height: 20px;"></textarea>
								<button type="submit" class="btn btn-primary" style="margin-left: 5px ;width: 40px; height: 40px;"><i class="fa-solid fa-arrow-pointer"></i></button>
							</div>
						</div>
					</form>
				</div>
			</div>
		}
	</div>
</div>
<footer>
	<div class="colum">
		<div class="colum-1">
			<h2>COMP1640</h2>
		</div>
		<div class="colum-2">
			<h3>About us</h3>
			<div class="contact">
				<p>Popular</p>
				<p>Trending</p>
				<p>Contact</p>
				<p>Support/Help</p>
				<p>Request Topics</p>
			</div>
		</div>
		<div class="colum-3">
			<h3>Follow us</h3>
			<div class="social">
				<div class="facebook">
					<div class="icon">
						<i class="fa-brands fa-facebook-f"></i>
					</div>
					<p>Facebook</p>
				</div>
				<div class="facebook">
					<div class="icon">
						<i class="fa-brands fa-instagram"></i>
					</div>
					<p>Instagram</p>
				</div>
				<div class="facebook">
					<div class="icon">
						<i class="fa-brands fa-twitter"></i>
					</div>
					<p>Twitter</p>
				</div>
				<div class="facebook">
					<div class="icon">
						<i class="fa-brands fa-linkedin"></i>
					</div>
					<p>LinkedIn</p>
				</div>
			</div>
		</div>
	</div>
	<hr>
	<div class="copy-right">
		<div class="year">
			2024 COMP1640. All right reserved.
		</div>
		<div class="policy">
			<u>Privacy Policy</u>
			<u>Term of Service</u>
			<u>Cookies Settings</u>
		</div>
	</div>
</footer>